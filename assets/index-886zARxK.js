(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))u(n);new MutationObserver(n=>{for(const t of n)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function i(n){const t={};return n.integrity&&(t.integrity=n.integrity),n.referrerPolicy&&(t.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?t.credentials="include":n.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function u(n){if(n.ep)return;n.ep=!0;const t=i(n);fetch(n.href,t)}})();preact.Fragment;var m=0;function r(e,o,i,u,n,t){var c,l,s={};for(l in o)l=="ref"?c=o[l]:s[l]=o[l];var f={type:e,props:s,key:i,ref:c,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--m,__i:-1,__u:0,__source:n,__self:t};if(typeof e=="function"&&(c=e.defaultProps))for(l in c)s[l]===void 0&&(s[l]=c[l]);return preact.options.vnode&&preact.options.vnode(f),f}const d=preactSignals.signal([]),a=preactSignals.signal({}),p=e=>{const[o,i]=preactHooks.useState(null);return preactHooks.useEffect(()=>{var n;const u=(n=a.value[e])==null?void 0:n.content;if(u||u===null){i(u);return}fetch(`/blog/${e}.md?time=${Date.now()}`).then(t=>t.ok?t.text():(a.value[e]={content:null},Promise.reject(t))).then(async t=>{const c=await marked.marked(t);a.value[e]={content:c},i(c)}).catch(t=>console.error("Error loading blog content:",t))},[e]),o},g=({matches:e})=>{const o=p(e.id),i=p(`${e.id}.comment`);return r("div",{children:[r("h2",{children:e.id}),o&&r("div",{children:r("div",{dangerouslySetInnerHTML:{__html:o}})}),i&&r("div",{children:[r("h2",{children:"Comment"}),r("div",{dangerouslySetInnerHTML:{__html:i}})]})]})},_=()=>r("div",{children:[r("h1",{children:"Himanushi 雑記"}),r("ul",{children:d.value.map(e=>r("li",{children:r("a",{href:`/blog/${e}`,children:e})},e))})]}),v=()=>r("div",{children:"ページが見つかりません"}),y=()=>{preactHooks.useEffect(()=>{d.value.length>0||fetch(`/blog/blogList.txt?time=${Date.now()}`).then(e=>e.text()).then(e=>{d.value=e.split(`
`)}).catch(e=>console.error("Error loading blog list:",e))},[])},b=()=>(y(),r(preactRouter.Router,{children:[r(preactRouter.Route,{path:"/",component:_}),r(preactRouter.Route,{path:"/blog/:id",component:g}),r(preactRouter.Route,{default:!0,component:v})]})),h=document.getElementById("app");h&&preact.render(r(b,{}),h);
