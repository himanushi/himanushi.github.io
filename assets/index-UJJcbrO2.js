(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();preact.Fragment;var m=0;function n(e,c,s,l,t,o){var r,i,u={};for(i in c)i=="ref"?r=c[i]:u[i]=c[i];var p={type:e,props:u,key:s,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--m,__i:-1,__u:0,__source:t,__self:o};if(typeof e=="function"&&(r=e.defaultProps))for(i in r)u[i]===void 0&&(u[i]=r[i]);return preact.options.vnode&&preact.options.vnode(p),p}const f=preactSignals.signal([]),a=preactSignals.signal({}),d=(e,c="/blogs")=>{const[s,l]=preactHooks.useState(null);return preactHooks.useEffect(()=>{var o;const t=(o=a.value[e])==null?void 0:o.content;if(t||t===null){l(t);return}fetch(`${c}/${e}.md?time=${Date.now()}`).then(r=>r.ok?r.text():(a.value[e]={content:null},Promise.reject(r))).then(async r=>{const i=await marked.marked(r);a.value[e]={content:i},l(i)}).catch(r=>console.error("Error loading blog content:",r))},[e]),s},g=({matches:e})=>{const c=d(e.id),s=d(`${e.id}.comment`,"/comments"),l=d(`${e.id}.tarot`,"/comments");return n("div",{children:[n("h2",{children:e.id}),c&&n("div",{children:n("div",{dangerouslySetInnerHTML:{__html:c}})}),l&&n("div",{children:[n("h2",{children:"Fortune"}),n("div",{dangerouslySetInnerHTML:{__html:l}})]}),s&&n("div",{children:[n("h2",{children:"Comment"}),n("div",{dangerouslySetInnerHTML:{__html:s}})]})]})},_=()=>n("div",{children:[n("h1",{children:"Himanushi 雑記"}),n("ul",{children:f.value.map(e=>n("li",{children:n("a",{href:`/blogs/${e}`,children:e})},e))})]}),v=()=>n("div",{children:"ページが見つかりません"}),y=()=>{preactHooks.useEffect(()=>{f.value.length>0||fetch(`/blogList.txt?time=${Date.now()}`).then(e=>e.text()).then(e=>{f.value=e.split(`
`)}).catch(e=>console.error("Error loading blog list:",e))},[])},L=()=>(y(),n(preactRouter.Router,{children:[n(preactRouter.Route,{path:"/",component:_}),n(preactRouter.Route,{path:"/blogs/:id",component:g}),n(preactRouter.Route,{default:!0,component:v})]})),h=document.getElementById("app");h&&preact.render(n(L,{}),h);
