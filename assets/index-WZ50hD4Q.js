(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&l(n)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();preact.Fragment;var v=0;function o(e,s,i,l,t,r){var n,c,u={};for(c in s)c=="ref"?n=s[c]:u[c]=s[c];var _={type:e,props:u,key:i,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--v,__i:-1,__u:0,__source:t,__self:r};if(typeof e=="function"&&(n=e.defaultProps))for(c in n)u[c]===void 0&&(u[c]=n[c]);return preact.options.vnode&&preact.options.vnode(_),_}const p=new marked.marked.Renderer;let d=!1;p.paragraph=e=>/\b\d{2}:\d{2}\b/.test(e)?(d=!0,`<div class="time-block"><span class="time-display">${e}</span>`):d?(d=!1,`<p>${e}</p></div>`):`<p>${e}</p>`;p.list=(e,s,i)=>{d=!1;const l=s?"ol":"ul",t=s&&i!==1?` start="${i}"`:"";return`<${l}${t}>${e}</${l}>`};marked.marked.use({renderer:p});const y=async e=>marked.marked(e),g=preactSignals.signal([]),m=preactSignals.signal({}),f=(e,s="/blogs")=>{const[i,l]=preactHooks.useState(null);return preactHooks.useEffect(()=>{var r;const t=(r=m.value[e])==null?void 0:r.content;if(t||t===null){l(t);return}fetch(`${s}/${e}.md?time=${Date.now()}`).then(n=>n.ok?n.text():(m.value[e]={content:null},Promise.reject(n))).then(async n=>{const c=await y(n);m.value[e]={content:c},l(c)}).catch(n=>console.error("Error loading blog content:",n))},[e]),i},C="_blogContainer_1m3i3_1",$="_blogPost_1m3i3_7",L="_blogContent_1m3i3_19",P="_blogComment_1m3i3_20",N="_blogTarot_1m3i3_21",a={blogContainer:C,blogPost:$,blogContent:L,blogComment:P,blogTarot:N},k=({matches:e})=>{const s=f(e.id),i=f(`${e.id}.comment`,"/comments"),l=f(`${e.id}.tarot`,"/comments");return o("div",{className:a.blogContainer,children:[o("h2",{children:e.id}),o("div",{className:a.blogPost,children:o("div",{className:a.blogContent,dangerouslySetInnerHTML:{__html:s??""}})}),l&&o("div",{className:a.blogPost,children:[o("h2",{children:"Fortune"}),o("div",{className:a.blogTarot,dangerouslySetInnerHTML:{__html:l}})]}),i&&o("div",{className:a.blogPost,children:[o("h2",{children:"Comment"}),o("div",{className:a.blogComment,dangerouslySetInnerHTML:{__html:i}})]})]})},R="_homeContainer_1heyf_1",H="_blogList_1heyf_12",h={homeContainer:R,blogList:H},T=()=>o("div",{className:h.homeContainer,children:[o("h1",{children:"Himanushi Lifelog"}),o("ul",{className:h.blogList,children:g.value.map(e=>o("li",{children:o("a",{href:`/blogs/${e}`,children:e})},e))})]}),S=()=>o("div",{children:"ページが見つかりません"}),w=()=>{preactHooks.useEffect(()=>{g.value.length>0||fetch(`/blogList.txt?time=${Date.now()}`).then(e=>e.text()).then(e=>{g.value=e.split(`
`).reverse()}).catch(e=>console.error("Error loading blog list:",e))},[])},E=()=>(w(),o(preactRouter.Router,{children:[o(preactRouter.Route,{path:"/",component:T}),o(preactRouter.Route,{path:"/blogs/:id",component:k}),o(preactRouter.Route,{default:!0,component:S})]})),b=document.getElementById("app");b&&preact.render(o(E,{}),b);
