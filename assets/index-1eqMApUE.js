(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const o of t.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function u(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function l(r){if(r.ep)return;r.ep=!0;const t=u(r);fetch(r.href,t)}})();preact.Fragment;var h=0;function c(e,n,u,l,r,t){var o,i,s={};for(i in n)i=="ref"?o=n[i]:s[i]=n[i];var d={type:e,props:s,key:u,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--h,__i:-1,__u:0,__source:r,__self:t};if(typeof e=="function"&&(o=e.defaultProps))for(i in o)s[i]===void 0&&(s[i]=o[i]);return preact.options.vnode&&preact.options.vnode(d),d}const f=preactSignals.signal([]),a=preactSignals.signal({}),m=e=>{const[n,u]=preactHooks.useState(null);return preactHooks.useEffect(()=>{var r;const l=(r=a.value[e])==null?void 0:r.content;if(l||l===null){u(l);return}fetch(`/blog/${e}.md?time=${Date.now()}`).then(t=>t.ok?t.text():(a.value[e]={content:null},Promise.reject(t))).then(async t=>{const o=await marked.marked(t);a.value[e]={content:o},u(o)}).catch(t=>console.error("Error loading blog content:",t))},[e]),n},g=({matches:e})=>{const n=m(e.id);return n?c("div",{dangerouslySetInnerHTML:{__html:n}}):null},_=()=>c("div",{children:[c("h1",{children:"Himanushi 雑記"}),c("ul",{children:f.value.map(e=>c("li",{children:c("a",{href:`/blog/${e}`,children:e})},e))})]}),v=()=>c("div",{children:"ページが見つかりません"}),y=()=>{preactHooks.useEffect(()=>{f.value.length>0||fetch(`/blog/blogList.txt?time=${Date.now()}`).then(e=>e.text()).then(e=>{f.value=e.split(`
`)}).catch(e=>console.error("Error loading blog list:",e))},[])},b=()=>(y(),c(preactRouter.Router,{children:[c(preactRouter.Route,{path:"/",component:_}),c(preactRouter.Route,{path:"/blog/:id",component:g}),c(preactRouter.Route,{default:!0,component:v})]})),p=document.getElementById("app");p&&preact.render(c(b,{}),p);
